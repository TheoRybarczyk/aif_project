FROM python:3.10

WORKDIR /app

# Install Annoy API related modules and data
COPY ./annoy_api.py /app/
COPY ./docker/annoy_requirements.txt /app/
COPY ./posters_paths.txt /app/
COPY ./posters.ann /app/
COPY ./movies_overviews.csv /app/
COPY ./rec_overviews_bow5000_10trees.ann /app/
COPY ./rec_overviews_bert.ann /app/

# Install python requirements
RUN pip install -r annoy_requirements.txt

# expose Flask port
EXPOSE 5000

# start service
ENTRYPOINT python annoy_api.py --docker

